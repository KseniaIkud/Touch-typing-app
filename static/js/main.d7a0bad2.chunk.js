(this["webpackJsonptouch-typing"]=this["webpackJsonptouch-typing"]||[]).push([[0],{34:function(e,t,s){"use strict";s.r(t);var n=s(0),a=s.n(n),r=s(9),c=s.n(r);var i={RESET_STATE:"RESET_STATE",SET_TEXT:"SET_TEXT",SET_RIGHT_KEY:"SET_RIGHT_KEY",SET_WRONG_KEY:"SET_WRONG_KEY",COMPLETE:"COMPLETE",WRONG_SYMBOL:"WRONG_SYMBOL",START:"START",SET_SPEED:"SET_SPEED",SET_LANGUAGE:"SET_LANGUAGE"};var o={outgoingValues:"",typedText:"",incomingValues:"",_textLength:0,percent:0,currentSymbol:"",isSymbolWrong:!1,startTime:null,speed:0,accuracy:100,language:"eng",isStart:!0,isResult:!1,_mistakes:0,_duration:0};const l=a.a.createContext();var u=function(e,t){switch(t.type){case i.RESET_STATE:return{...o,isStart:!1,language:e.language};case i.SET_TEXT:return{...e,incomingValues:t.result.substr(1),_textLength:t.result.length,currentSymbol:t.result.charAt(0)};case i.START:return{...e,startTime:e.startTime||t.time};case i.SET_SPEED:return{...e,_duration:(t.time-e.startTime)/6e4,speed:e._duration?(e.outgoingValues.length/e._duration).toFixed(0):0};case i.SET_RIGHT_KEY:return{...e,outgoingValues:e.outgoingValues+t.key,typedText:e.typedText+t.key,incomingValues:e.incomingValues.substr(1),currentSymbol:e.incomingValues.charAt(0),isSymbolWrong:!1,percent:100*(e.outgoingValues.length+1)/e._textLength};case i.COMPLETE:return{...e,isResult:!0,outgoingValues:""};case i.WRONG_SYMBOL:return{...e,isSymbolWrong:!0};case i.SET_WRONG_KEY:return{...e,typedText:e.typedText+t.key,accuracy:(100-100*(e._mistakes+1)/e._textLength).toFixed(1),_mistakes:e._mistakes+1};case i.SET_LANGUAGE:return{...e,language:t.language};default:return e}};var d=e=>"rus"===e?fetch("https://fish-text.ru/get?format=json&number=3").then((e=>e.json())).then((e=>e.text)):"eng"===e?fetch("https://baconipsum.com/api/?type=all-meat&sentences=4").then((e=>e.json())).then((e=>e[0])):void 0;var j=()=>(new Date).getTime();var g=e=>{const[t,s]=Object(n.useState)(),a=n=>{let{key:a}=n;t!==a&&1===a.length&&(s(a),e(a))},r=()=>{s(null)};return Object(n.useEffect)((()=>(window.addEventListener("keydown",a),window.addEventListener("keyup",r),()=>{window.removeEventListener("keydown",a),window.removeEventListener("keyup",r)}))),t},T=(s(15),s(38)),y=s(25),_=s(37),h=s(2);var b=()=>{const{state:e,dispatch:t}=Object(n.useContext)(l),s=e=>{t({type:i.SET_LANGUAGE,language:e})};return Object(h.jsxs)(_.a,{children:[Object(h.jsxs)(_.a.Toggle,{variant:"info",id:"dropdown-basic",children:["eng"===e.language&&"English","rus"===e.language&&"Russian"]}),Object(h.jsxs)(_.a.Menu,{children:[Object(h.jsx)(_.a.Item,{eventKey:"1",onClick:()=>s("rus"),children:"russian"}),Object(h.jsx)(_.a.Item,{eventKey:"2",onClick:()=>s("eng"),children:"english"})]})]})};var x=e=>{let{onStart:t}=e;const{state:s}=Object(n.useContext)(l);return Object(h.jsx)("div",{className:s.isStart?"w-100 h-75 position-absolute d-flex justify-content-center":"d-none",children:Object(h.jsxs)(T.a,{show:s.isStart,variant:"secondary",className:"w-25 align-self-center",children:[Object(h.jsx)(T.a.Heading,{children:"Check your typing speed"}),Object(h.jsx)("p",{children:"Type a short text to measure your typing speed and accuracy"}),Object(h.jsx)("hr",{}),Object(h.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(h.jsx)(y.a,{onClick:t,variant:"outline-info",children:"Start"}),Object(h.jsx)(b,{})]})]})})},p=s(8),E=s.n(p),O=s(39),m=s.p+"static/media/restart.6f33e8f5.png";var S=e=>{let{onStart:t}=e;const{state:s}=Object(n.useContext)(l);return Object(h.jsxs)("div",{className:E.a.typingArea,children:[Object(h.jsxs)("div",{className:E.a.header,children:[Object(h.jsx)(O.a,{now:s.percent,variant:"success",animated:!0,className:"w-75"}),Object(h.jsx)("img",{src:m,alt:"restart",width:"40",className:E.a.restart,onClick:t})]}),Object(h.jsxs)("div",{className:E.a.content,children:[Object(h.jsxs)("div",{className:E.a.text,children:[Object(h.jsx)("span",{className:E.a.outgoingValue,children:s.outgoingValues}),Object(h.jsx)("span",{className:`${E.a.key} ${s.isSymbolWrong&&E.a.keyWrong}`,children:s.currentSymbol}),Object(h.jsx)("span",{children:s.incomingValues})]}),Object(h.jsxs)("div",{className:E.a.result,children:[Object(h.jsxs)("div",{children:["Speed",Object(h.jsxs)("div",{children:[s.speed," cpm"]})]}),Object(h.jsxs)("div",{children:["Accuracy",Object(h.jsxs)("div",{children:[s.accuracy,"%"]})]})]})]})]})};var v=e=>{let{onStart:t}=e;const{state:s}=Object(n.useContext)(l);return Object(h.jsx)("div",{className:s.isResult?"w-100 h-75 position-absolute d-flex justify-content-center":"d-none",children:Object(h.jsxs)(T.a,{show:s.isResult,variant:"success",className:"w-25 align-self-center",children:[Object(h.jsx)(T.a.Heading,{children:"Your result"}),Object(h.jsxs)("p",{children:[s.speed," Character Per Minute"]}),Object(h.jsxs)("p",{children:[s.accuracy,"% accuracy"]}),Object(h.jsx)("hr",{}),Object(h.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(h.jsx)(y.a,{onClick:t,variant:"outline-success",children:"Start again"}),Object(h.jsx)(b,{})]})]})})};var A=()=>{const{state:e,dispatch:t}=Object(n.useContext)(l),s=()=>{t({type:i.RESET_STATE}),d(e.language).then((e=>{t({type:i.SET_TEXT,result:e})}))};return g((s=>{if(t({type:i.START,time:j()}),Boolean(e.startTime&&e.outgoingValues)&&t({type:i.SET_SPEED,time:j()}),s===e.currentSymbol){t({type:i.SET_RIGHT_KEY,key:s}),Boolean(e.startTime&&!e.incomingValues)&&t({type:i.COMPLETE})}else{t({type:i.WRONG_SYMBOL}),e.typedText.substr(-1)===e.outgoingValues.substr(-1)&&t({type:i.SET_WRONG_KEY,key:s})}})),Object(h.jsxs)("div",{children:[Object(h.jsx)(x,{onStart:s}),Object(h.jsx)(v,{onStart:s}),Object(h.jsx)(S,{onStart:s})]})};var N=()=>{const[e,t]=Object(n.useReducer)(u,o);return Object(h.jsx)(l.Provider,{value:{dispatch:t,state:e},children:Object(h.jsx)(A,{})})};c.a.render(Object(h.jsx)(a.a.StrictMode,{children:Object(h.jsx)(N,{})}),document.getElementById("root"))},8:function(e,t,s){e.exports={typingArea:"TypingArea_typingArea__zhN3k",header:"TypingArea_header__2Ayd8",restart:"TypingArea_restart__1aAgy",content:"TypingArea_content__2Ni6O",text:"TypingArea_text__2xc2o",outgoingValue:"TypingArea_outgoingValue__1-43Q",key:"TypingArea_key__1Ra3V",keyWrong:"TypingArea_keyWrong__1gMvB",result:"TypingArea_result__1UyyT",resultName:"TypingArea_resultName__1L1v_"}}},[[34,1,2]]]);
//# sourceMappingURL=main.d7a0bad2.chunk.js.map