(this["webpackJsonptouch-typing"]=this["webpackJsonptouch-typing"]||[]).push([[0],{35:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),c=n(10),r=n.n(c),i=n(19),u=n(7),o={RESET_STATE:"RESET_STATE",SET_TEXT:"SET_TEXT",SET_RIGHT_KEY:"SET_RIGHT_KEY",SET_WRONG_KEY:"SET_WRONG_KEY",COMPLETE:"COMPLETE",WRONG_SYMBOL:"WRONG_SYMBOL",START:"START",SET_SPEED:"SET_SPEED",SET_LANGUAGE:"SET_LANGUAGE"},l={outgoingValues:"",typedText:"",incomingValues:"",_textLength:0,percent:0,currentSymbol:"",isSymbolWrong:!1,startTime:null,speed:0,accuracy:100,language:"eng",isStart:!0,isResult:!1,_mistakes:0,_duration:0},j=s.a.createContext();var d=function(e,t){switch(t.type){case o.RESET_STATE:return Object(u.a)(Object(u.a)({},l),{},{isStart:!1,language:e.language});case o.SET_TEXT:return Object(u.a)(Object(u.a)({},e),{},{incomingValues:t.result.substr(1),_textLength:t.result.length,currentSymbol:t.result.charAt(0)});case o.START:return Object(u.a)(Object(u.a)({},e),{},{percent:100*(e.outgoingValues.length+1)/e._textLength,startTime:e.startTime||t.time});case o.SET_SPEED:return Object(u.a)(Object(u.a)({},e),{},{_duration:(t.time-e.startTime)/6e4,speed:e._duration?(e.outgoingValues.length/e._duration).toFixed(0):0});case o.SET_RIGHT_KEY:return Object(u.a)(Object(u.a)({},e),{},{outgoingValues:e.outgoingValues+t.key,typedText:e.typedText+t.key,incomingValues:e.incomingValues.substr(1),currentSymbol:e.incomingValues.charAt(0),isSymbolWrong:!1});case o.COMPLETE:return Object(u.a)(Object(u.a)({},e),{},{isResult:!0,outgoingValues:""});case o.WRONG_SYMBOL:return Object(u.a)(Object(u.a)({},e),{},{isSymbolWrong:!0});case o.SET_WRONG_KEY:return Object(u.a)(Object(u.a)({},e),{},{typedText:e.typedText+t.key,accuracy:(100-100*(e._mistakes+1)/e._textLength).toFixed(1),_mistakes:e._mistakes+1});case o.SET_LANGUAGE:return Object(u.a)(Object(u.a)({},e),{},{language:t.language});default:return e}},g=function(e){return"rus"===e?fetch("https://fish-text.ru/get?format=json&number=3").then((function(e){return e.json()})).then((function(e){return e.text})):"eng"===e?fetch("https://baconipsum.com/api/?type=all-meat&sentences=4").then((function(e){return e.json()})).then((function(e){return e[0]})):void 0},b=function(){return(new Date).getTime()},O=function(e){var t=Object(a.useState)(),n=Object(i.a)(t,2),s=n[0],c=n[1],r=function(t){var n=t.key;s!==n&&1===n.length&&(c(n),e(n))},u=function(){c(null)};return Object(a.useEffect)((function(){return window.addEventListener("keydown",r),window.addEventListener("keyup",u),function(){window.removeEventListener("keydown",r),window.removeEventListener("keyup",u)}})),s},T=(n(16),n(41)),_=n(26),y=n(40),h=n(2),x=function(){var e=Object(a.useContext)(j),t=e.state,n=e.dispatch;return Object(h.jsxs)(y.a,{children:[Object(h.jsxs)(y.a.Toggle,{variant:"info",id:"dropdown-basic",children:["eng"===t.language&&"\u0430\u043d\u0433\u043b\u0438\u0439\u0441\u043a\u0438\u0439","rus"===t.language&&"\u0440\u0443\u0441\u0441\u043a\u0438\u0439"]}),Object(h.jsxs)(y.a.Menu,{children:[Object(h.jsx)(y.a.Item,{eventKey:"1",onClick:function(){n({type:o.SET_LANGUAGE,language:"rus"})},children:"\u0440\u0443\u0441\u0441\u043a\u0438\u0439"}),Object(h.jsx)(y.a.Item,{eventKey:"2",onClick:function(){n({type:o.SET_LANGUAGE,language:"eng"})},children:"\u0430\u043d\u0433\u043b\u0438\u0439\u0441\u043a\u0438\u0439"})]})]})},E=function(e){var t=e.onStart,n=Object(a.useContext)(j).state;return Object(h.jsx)("div",{className:n.isStart?"w-100 h-75 position-absolute d-flex justify-content-center":"d-none",children:Object(h.jsxs)(T.a,{show:n.isStart,variant:"secondary",className:"w-25 align-self-center",children:[Object(h.jsx)(T.a.Heading,{children:"\u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u0441\u043a\u043e\u0440\u043e\u0441\u0442\u044c \u0441\u0432\u043e\u0435\u0439 \u043f\u0435\u0447\u0430\u0442\u0438"}),Object(h.jsx)("p",{children:"\u041d\u0430\u0431\u0435\u0440\u0438\u0442\u0435 \u043d\u0435\u0431\u043e\u043b\u044c\u0448\u043e\u0439 \u0442\u0435\u043a\u0441\u0442, \u0447\u0442\u043e\u0431\u044b \u0443\u0437\u043d\u0430\u0442\u044c \u0441\u043a\u043e\u0440\u043e\u0441\u0442\u044c \u0438 \u0442\u043e\u0447\u043d\u043e\u0442\u044c \u043d\u0430\u0431\u043e\u0440\u0430"}),Object(h.jsx)("hr",{}),Object(h.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(h.jsx)(_.a,{onClick:t,variant:"outline-info",children:"\u041d\u0430\u0447\u0430\u0442\u044c"}),Object(h.jsx)(x,{})]})]})})},p=n(9),m=n.n(p),S=n(42),f=n.p+"static/media/restart.6f33e8f5.png",v=function(e){var t=e.onStart,n=Object(a.useContext)(j).state;return Object(h.jsxs)("div",{className:m.a.typingArea,children:[Object(h.jsxs)("div",{className:m.a.header,children:[Object(h.jsx)(S.a,{now:n.percent,variant:"success",animated:!0,className:"w-75"}),Object(h.jsx)("img",{src:f,alt:"restart",width:"40",className:m.a.restart,onClick:t})]}),Object(h.jsxs)("div",{className:m.a.content,children:[Object(h.jsxs)("div",{className:m.a.text,children:[Object(h.jsx)("span",{className:m.a.outgoingValue,children:n.outgoingValues}),Object(h.jsx)("span",{className:"".concat(m.a.key," ").concat(n.isSymbolWrong&&m.a.keyWrong),children:n.currentSymbol}),Object(h.jsx)("span",{children:n.incomingValues})]}),Object(h.jsxs)("div",{className:m.a.result,children:[Object(h.jsxs)("div",{children:["\u0421\u043a\u043e\u0440\u043e\u0441\u0442\u044c",Object(h.jsxs)("div",{children:[n.speed," \u0437\u043d/\u043c\u0438\u043d"]})]}),Object(h.jsxs)("div",{children:["\u0422\u043e\u0447\u043d\u043e\u0441\u0442\u044c",Object(h.jsxs)("div",{children:[n.accuracy,"%"]})]})]})]})]})},A=function(e){var t=e.onStart,n=Object(a.useContext)(j).state;return Object(h.jsx)("div",{className:n.isResult?"w-100 h-75 position-absolute d-flex justify-content-center":"d-none",children:Object(h.jsxs)(T.a,{show:n.isResult,variant:"success",className:"w-25 align-self-center",children:[Object(h.jsx)(T.a.Heading,{children:"\u0412\u0430\u0448 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442"}),Object(h.jsxs)("p",{children:[n.speed," \u0437\u043d\u0430\u043a\u043e\u0432 \u0432 \u043c\u0438\u043d\u0443\u0442\u0443"]}),Object(h.jsxs)("p",{children:[n.accuracy,"% \u0442\u043e\u0447\u043d\u043e\u0441\u0442\u0438"]}),Object(h.jsx)("hr",{}),Object(h.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(h.jsx)(_.a,{onClick:t,variant:"outline-success",children:"\u041d\u0430\u0447\u0430\u0442\u044c \u0437\u0430\u043d\u043e\u0432\u043e"}),Object(h.jsx)(x,{})]})]})})},N=function(){var e=Object(a.useContext)(j),t=e.state,n=e.dispatch,s=function(){n({type:o.RESET_STATE}),g(t.language).then((function(e){n({type:o.SET_TEXT,result:e})}))};return O((function(e){(n({type:o.START,time:b()}),t.startTime&&t.outgoingValues&&n({type:o.SET_SPEED,time:b()}),e===t.currentSymbol)?(n({type:o.SET_RIGHT_KEY,key:e}),t.startTime&&!t.incomingValues&&n({type:o.COMPLETE})):(n({type:o.WRONG_SYMBOL}),t.typedText.substr(-1)===t.outgoingValues.substr(-1)&&n({type:o.SET_WRONG_KEY,key:e}))})),Object(h.jsxs)("div",{children:[Object(h.jsx)(E,{onStart:s}),Object(h.jsx)(A,{onStart:s}),Object(h.jsx)(v,{onStart:s})]})},k=function(){var e=Object(a.useReducer)(d,l),t=Object(i.a)(e,2),n=t[0],s=t[1];return Object(h.jsx)(j.Provider,{value:{dispatch:s,state:n},children:Object(h.jsx)(N,{})})};r.a.render(Object(h.jsx)(s.a.StrictMode,{children:Object(h.jsx)(k,{})}),document.getElementById("root"))},9:function(e,t,n){e.exports={typingArea:"TypingArea_typingArea__zhN3k",header:"TypingArea_header__2Ayd8",restart:"TypingArea_restart__1aAgy",content:"TypingArea_content__2Ni6O",text:"TypingArea_text__2xc2o",outgoingValue:"TypingArea_outgoingValue__1-43Q",key:"TypingArea_key__1Ra3V",keyWrong:"TypingArea_keyWrong__1gMvB",result:"TypingArea_result__1UyyT",resultName:"TypingArea_resultName__1L1v_"}}},[[35,1,2]]]);
//# sourceMappingURL=main.a6fa5f8b.chunk.js.map